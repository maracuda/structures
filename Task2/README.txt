Задание 2

Есть сущности А(id, value, ?b_id), сущности B(id, name).
Нужно делать SaveOrAdd(A), Remove(A), CountUsage(B),GetRelationElements(B)

Связка А и В явно представляют собой отношение 1 ко многим. Сущность В содержит ссылки на присоединенные сущности А. Есть такая модель - Hub and spoke, по-русски "колесо", хорошо накладывается на эту задачу. Сущности А - спицы, а В - ступицы, отсюда и названия классов.

Сделал 2 реализации интерфейса: в первой StupidHubber есть два словаря, где хранятся коллекции сущностей, спицы умеют прицепляться к ступицам. Чтобы получить количество спиц и коллекцию спиц для ступицы нужно пройтись по всем спицам - долго; во второй реализации NotSoStupidHubber есть еще словарь с id ступиц и списком их спиц, с помощью него быстро находим нужную коллецию спиц и узнаем количество, но нам нужно заботиться о ведение этого словаря.